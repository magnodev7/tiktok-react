[Unit]
Description=TikTok Scheduler - Daemon de Agendamento
After=network.target postgresql.service tiktok-backend.service
Wants=postgresql.service
Requires=tiktok-backend.service

[Service]
Type=simple
User=magno
Group=magno
WorkingDirectory=/home/magno/work/tiktok-react/beckend
Environment="PATH=/home/magno/work/tiktok-react/beckend/venv/bin:/usr/local/bin:/usr/bin:/bin"
Environment="DISPLAY=:0"

# Comando para iniciar o scheduler
ExecStart=/home/magno/work/tiktok-react/beckend/venv/bin/python start_scheduler.py start

# Comando para parar gracefully
ExecStop=/home/magno/work/tiktok-react/beckend/venv/bin/python start_scheduler.py stop

# Restart autom√°tico
Restart=always
RestartSec=10

# Logs
StandardOutput=append:/home/magno/work/tiktok-react/beckend/logs/scheduler.log
StandardError=append:/home/magno/work/tiktok-react/beckend/logs/scheduler-error.log

# Tempo para shutdown graceful
TimeoutStopSec=30

# Limites
LimitNOFILE=65536

[Install]
WantedBy=multi-user.target
